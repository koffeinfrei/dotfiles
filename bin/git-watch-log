#!/usr/bin/env bash

function log {
  default_branch=$(git default-branch)
  current_branch=$(git rev-parse --abbrev-ref HEAD)

  if [ "$default_branch" == "$current_branch" ]; then
    echo "## $current_branch...origin/${default_branch}"
    command="lg origin/${default_branch}.."
  else
    echo "## $current_branch...$default_branch"
    command="lgg"
  fi

  git --no-optional-locks $command --color
}
export -f log

watch --color --interval 1 --no-title -x bash -c log
